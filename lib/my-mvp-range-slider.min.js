!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("my-mvp-range-slider",[],t):"object"==typeof exports?exports["my-mvp-range-slider"]=t():e["my-mvp-range-slider"]=t()}(window,(function(){return function(e){var t={};function a(i){if(t[i])return t[i].exports;var s=t[i]={i:i,l:!1,exports:{}};return e[i].call(s.exports,s,s.exports,a),s.l=!0,s.exports}return a.m=e,a.c=t,a.d=function(e,t,i){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)a.d(i,s,function(t){return e[t]}.bind(null,s));return i},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=7)}([function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,,function(e,t,a){"use strict";a.r(t);var i=function(){return(i=Object.assign||function(e){for(var t,a=1,i=arguments.length;a<i;a++)for(var s in t=arguments[a])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)},s=function(){function e(t){e.validateInitOptions(t)?(this.maxValue=t.maxValue,this.minValue=t.minValue,this.step=t.step):(this.maxValue=10,this.minValue=0,this.step=1),this.observers=new Set,this.value=t.value,void 0!==t.secondValue&&(this.secondValue=t.secondValue),void 0!==t.lockedValues?this.lockedValues=new Set(t.lockedValues):this.lockedValues=new Set,this.isReadyNotify=!0,this.isUpdated=!0}return Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(e){if(this._ableToChange("value",e)){var t=this._value;void 0===this._value&&(this._value=this._minValue);var a=this._getMultipleStep(e);void 0!==this._secondValue&&a>=this._secondValue?(this._value=this._secondValue,this.isUpdated=!1):t!==a&&(this._value=a,this.isUpdated=!1),t!==this._value&&this.notify()}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxValue",{get:function(){return this._maxValue},set:function(e){this._ableToChange("maxValue",e)&&(this._maxValue=e,this.isUpdated=!1,void 0!==this._value&&(this.value=this._value),void 0!==this._secondValue&&(this.secondValue=this._secondValue),this.isUpdated||this.notify())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minValue",{get:function(){return this._minValue},set:function(e){this._ableToChange("minValue",e)&&(this._minValue=e,this.isUpdated=!1,void 0!==this._secondValue&&(this.secondValue=this._secondValue),void 0!==this._value&&(this.value=this._value),this.isUpdated||this.notify())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"step",{get:function(){return this._step},set:function(e){this._ableToChange("step",e)&&(this._step=+e.toFixed(17),this.isUpdated=!1,void 0!==this._value&&(this.value=this._value),void 0!==this._secondValue&&(this.secondValue=this._secondValue),this.isUpdated||this.notify())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"secondValue",{get:function(){return this._secondValue},set:function(e){if(this._ableToChange("secondValue",e)){var t=this._value,a=this._secondValue;if(void 0!==e){var i=this._getMultipleStep(e);i<=t?(this._secondValue=t,this.isUpdated=a===t):a!==i&&(this._secondValue=i,this.isUpdated=!1)}else this._secondValue=void 0;a!==this._secondValue&&this.notify()}},enumerable:!0,configurable:!0}),e.prototype.addObserver=function(e){this.observers.add(e)},e.prototype.removeObserver=function(e){this.observers.delete(e)},e.prototype.getState=function(){var e={maxValue:this._maxValue,minValue:this._minValue,value:this._value,step:this._step,lockedValues:Array.from(this.lockedValues)};return void 0!==this._secondValue&&(e.secondValue=this._secondValue),e},e.prototype.updateState=function(e){var t=i(i({},this.getState()),e);this.isReadyNotify=!1,t.maxValue>t.minValue&&(this._maxValue=t.maxValue,this._minValue=t.minValue),this.step=t.step,this.value=t.value,this.secondValue=t.secondValue,this.isReadyNotify=!0,this.isUpdated||this.notify()},e.prototype.lockState=function(e){var t=this;Array.isArray(e)?e.forEach((function(e){switch(e){case"minValue":t.lockedValues.add("minValue");break;case"maxValue":t.lockedValues.add("maxValue");break;case"step":t.lockedValues.add("step");break;case"value":t.lockedValues.add("value");break;case"secondValue":t.lockedValues.add("secondValue")}})):"all"===e&&(this.lockedValues.add("maxValue"),this.lockedValues.add("minValue"),this.lockedValues.add("step"),this.lockedValues.add("value"),this.lockedValues.add("secondValue"))},e.prototype.unlockState=function(e){var t=this;Array.isArray(e)?e.forEach((function(e){switch(e){case"minValue":t.lockedValues.delete("minValue");break;case"maxValue":t.lockedValues.delete("maxValue");break;case"step":t.lockedValues.delete("step");break;case"value":t.lockedValues.delete("value");break;case"secondValue":t.lockedValues.delete("secondValue")}})):"all"===e&&this.lockedValues.clear()},e.prototype.notify=function(){this._checkObservers()&&this.isReadyNotify&&(this.observers.forEach((function(e){e.update()})),this.isUpdated=!0)},e.prototype._checkObservers=function(){return void 0!==this.observers&&0!==this.observers.size},e.prototype._getMultipleStep=function(t){var a,i=this._step,s=this._maxValue,n=this._minValue;switch(!0){case t>=s:a=s;break;case t<=n:a=n;break;case t%i/i>.5:a=t-t%i+i;break;default:a=t-t%i}return e.fixVal(a,i)},e.prototype._isLocked=function(e){return void 0!==this.lockedValues&&this.lockedValues.has(e)},e.prototype._ableToChange=function(t,a){var i,s,n,r,o=e._validate(a),l=this._isLocked(t);switch(t){case"value":return o&&!l;case"secondValue":return void 0===a||o&&!l;case"maxValue":return i=a===this._maxValue,s=void 0===this._maxValue,n=void 0===this._minValue||a>this._minValue,s||o&&!l&&!i&&n;case"minValue":return i=a===this._minValue,s=void 0===this._minValue,r=void 0===this._maxValue||a<this._maxValue,s||o&&!l&&!i&&r;case"step":return i=a===this._step,(s=void 0===this._step)||o&&!l&&!i&&a>0;default:return!1}},e._validate=function(e){return!(null===e||Number.isNaN(e)||!Number.isFinite(e))},e.validateInitOptions=function(e){var t=Object.prototype.hasOwnProperty.call(e,"maxValue"),a=Object.prototype.hasOwnProperty.call(e,"minValue"),i=Object.prototype.hasOwnProperty.call(e,"step"),s=e.maxValue>e.minValue,n=e.step>0;return t&&a&&i&&s&&n},e.fixVal=function(e,t){if(!(t%1))return+e.toFixed(0);var a=(""+t).split(".")[1].length;return+e.toFixed(a)},e}(),n=function(){return(n=Object.assign||function(e){for(var t,a=1,i=arguments.length;a<i;a++)for(var s in t=arguments[a])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)},r=function(){function e(e){this.model=e.model,this.view=e.view,void 0!==e.dataValues&&e.dataValues.length?this.updateDataValues(e.dataValues):this.dataValues=[],this.renderData=this.createDataValues(),this.callbacks={onStart:e.onStart,onChange:e.onChange,onFinish:e.onFinish,onUpdate:e.onUpdate},this.isChanging=!1,this.subscribeToModel(),this.subscribeToView(),this.renderView()}return e.prototype.update=function(t){var a={maxValue:t.maxValue,minValue:t.minValue,step:t.step,value:t.value};Object.prototype.hasOwnProperty.call(t,"secondValue")&&(a.secondValue=t.secondValue);var i={isHorizontal:t.isHorizontal,range:t.range,dragInterval:t.dragInterval,runner:t.runner,bar:t.bar,scale:t.scale,scaleStep:t.scaleStep,displayScaleValue:t.displayScaleValue,displayValue:t.displayValue,displayMin:t.displayMin,displayMax:t.displayMax,prefix:t.prefix,postfix:t.postfix};e.isEmpty(i)||this.view.update(i),e.isEmpty(a)&&!Object.prototype.hasOwnProperty.call(t,"secondValue")||this.model.updateState(a),this.callbacks.onUpdate()},e.prototype.getAllData=function(){return n(n(n({},this.getModelData()),this.getViewData()),this.getPresenterData())},e.prototype.getModelData=function(){return this.model.getState()},e.prototype.getViewData=function(){return this.view.getData()},e.prototype.getPresenterData=function(){return{dataValues:this.dataValues,renderData:this.renderData}},e.prototype.setUserData=function(e){Array.isArray(e)&&e.length>0?(this.updateDataValues(e),this.renderData=this.createDataValues()):!Array.isArray(e)&&s.validateInitOptions(e)&&(this.dataValues=[],this.model.unlockState(["maxValue","minValue","step"]),Object.prototype.hasOwnProperty.call(e,"lockedValues")&&this.model.lockState(e.lockedValues),this.model.updateState(e))},e.prototype.createDataValues=function(e){if(this.dataValues.length>0)return this.dataValues;for(var t=e||this.model.getState(),a=t.minValue,i=t.maxValue,n=t.step,r=[],o=a;o<=i;o+=n){var l=s.fixVal(o,n);r.push(l)}return r[r.length-1]<i&&r.push(i),r},e.prototype.subscribeToModel=function(){var e=this;this.modelObserver={update:function(){var t=e.getModelData();e.renderData=e.createDataValues(t),e.isChanging&&e.callbacks.onChange(t),e.renderView()}},this.model.addObserver(this.modelObserver)},e.prototype.subscribeToView=function(){var e=this;this.viewObserver={start:function(){e.callbacks.onStart(e.getModelData())},change:function(t){e.isChanging=!0;var a=e.convertPercentToValue(t);if(Array.isArray(a)){var i=a[0],s=a[1];e.model.updateState({value:i,secondValue:s})}else e.model.updateState({value:a})},finish:function(){e.callbacks.onFinish(e.getModelData())}},this.view.addObserver(this.viewObserver)},e.prototype.renderView=function(){var e,t=this.getModelData().value,a=this.getModelData().secondValue;this.getViewData().range&&void 0!==a&&(e=[t,a]);var i=e||t,s=this.convertValueToPercent(i),n=this.createPercentageData(),r={data:this.renderData,percentageData:n,value:i,percentage:s};this.view.render(r)},e.prototype.updateDataValues=function(e){this.dataValues=e,this.model.updateState({maxValue:e.length-1,minValue:0,step:1}),this.model.lockState(["maxValue","minValue","step"])},e.prototype.convertPercentToValue=function(e){var t,a=this.getModelData(),i=a.minValue,s=a.maxValue;Array.isArray(e)?t=[(s-i)/100*e[0]+i,(s-i)/100*e[1]+i]:t=(s-i)/100*e+i;return t},e.prototype.convertValueToPercent=function(e){var t,a,i,n=this.getModelData(),r=n.minValue,o=n.maxValue,l=n.step/(o-r);if(Array.isArray(e)){t=(e[0]-r)/(o-r)*100,a=(e[1]-r)/(o-r)*100,i=[s.fixVal(t,l),s.fixVal(a,l)]}else{var d=(e-r)/(o-r)*100;i=s.fixVal(d,l)}return i},e.prototype.createPercentageData=function(){for(var e=this.model.getState(),t=e.minValue,a=e.maxValue,i=e.step,n=[],r=i/(a-t),o=t;o<=a;o+=i){var l=s.fixVal(o,r);n.push(l)}return n[n.length-1]<a&&n.push(a),n.map((function(e){var i=(e-t)/(a-t)*100;return s.fixVal(i,r)}))},e.isEmpty=function(e){var t=Object.entries(e),a=!0;return t.forEach((function(e){void 0!==e[1]&&(a=!1)})),a},e}(),o=(a(0),a(1),function(){return(o=Object.assign||function(e){for(var t,a=1,i=arguments.length;a<i;a++)for(var s in t=arguments[a])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)}),l=function(){function e(t){this.$view=t.$viewContainer,this.$scale=e.createScale(),this.isRendered=!1}return e.prototype.update=function(t){var a=this,i=this.$scale.data("options"),s=t.data,n=t.options,r=o(o(o({},{isHorizontal:!0,scaleStep:1,displayScaleStrips:!0,displayScaleValue:!0,displayMin:!0,displayMax:!0}),i),n);this.$scale.data("data",s),this.$scale.data("options",r),r.isHorizontal&&!this.$scale.hasClass("slider__scale_horizontal")&&this.$scale.addClass("slider__scale_horizontal"),!r.isHorizontal&&this.$scale.hasClass("slider__scale_horizontal")&&this.$scale.removeClass("slider__scale_horizontal"),this.isRendered||(this.$view.append(this.$scale),this.attachEventHandlers(),this.isRendered=!0);var l=s.data,d=s.percentageData;this.$scale.empty(),l.forEach((function(t,i,s){var o;switch(!0){case!r.displayMin&&0===i:case!r.displayMax&&i===s.length-1:case i%r.scaleStep!=0:o="";break;default:o=t.toString()}if(""!==o){var l=d[i],u=e.createElement(o,l,r);a.$scale.append(u);var h=u[0].getBoundingClientRect();if(n.isHorizontal)switch(l){case 100:u.css({right:"0%","align-items":"flex-end"});break;case 0:u.css("left",l+"%");break;default:u.css({left:"calc("+l+"% - "+h.width/2+"px)","align-items":"center"})}else switch(l){case 100:u.css("bottom","0%");break;default:u.css("top",l+"%")}}}))},e.prototype.destroy=function(){this.$scale.off("click"),this.$scale.remove(),this.isRendered=!1},e.prototype.attachEventHandlers=function(){this.$scale.on("click",this.clickEventListener.bind(this))},e.prototype.clickEventListener=function(e){var t,a=e.target;if(a.classList.contains("scale__element")){t=$(a).data("value");var i=$.Event("startChanging.myMVPSlider");this.$view.trigger(i);var s=this.$scale.data("data").percentage,n=!1;if(Array.isArray(s))n=t>(s[1]+s[0])/2;var r=[t,n],o=$.Event("changeValue.myMVPSlider");this.$view.trigger(o,r);var l=$.Event("finish.myMVPSlider");this.$view.trigger(l,r)}},e.createScale=function(){return $("<span>",{class:"js-slider__scale slider__scale"})},e.createElement=function(e,t,a){var i=$("<span>",{class:"scale__element"});return i.html(e),i.data("value",t),a.isHorizontal&&i.addClass("scale__element_horizontal"),i},e}(),d=(a(2),function(){return(d=Object.assign||function(e){for(var t,a=1,i=arguments.length;a<i;a++)for(var s in t=arguments[a])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)}),u=function(){function e(t){this.$view=t.$viewContainer,this.$bar=e.createBar(),this.isRendered=!1}return e.prototype.update=function(e){var t=this.$bar.data("options"),a=e.options,i=e.data,s=d(d(d({},{isHorizontal:!0,range:!0,dragInterval:!1}),t),a);this.$bar.data("options",s),this.$bar.data("data",i),!s.isHorizontal&&this.$bar.hasClass("slider__bar_horizontal")?this.$bar.removeClass("slider__bar_horizontal"):s.isHorizontal&&!this.$bar.hasClass("slider__bar_horizontal")&&this.$bar.addClass("slider__bar_horizontal"),s.range&&this.createRangeElement(),!s.range&&this.$range&&this.destroyRangeElement(),this.isRendered||(this.$view.append(this.$bar),this.isRendered=!0,this.attachEventHandlers())},e.prototype.destroy=function(){this.$bar.off("click"),this.$bar.remove(),this.isRendered=!1},e.prototype.attachEventHandlers=function(){this.$bar.on("click",this.clickHandler.bind(this))},e.prototype.clickHandler=function(e){var t,a=$.Event("startChanging.myMVPSlider");this.$view.trigger(a);var i=e.currentTarget,s=i.getBoundingClientRect();t=$(i).data("options").isHorizontal?(e.clientX-s.x)/s.width*100:(e.clientY-s.y)/s.height*100;var n=$(i).data("data"),r=!1;Array.isArray(n)&&(r=t>(n[1]+n[0])/2);var o=[t,r],l=$.Event("changeValue.myMVPSlider");this.$view.trigger(l,o);var d=$.Event("finish.myMVPSlider");this.$view.trigger(d,o)},e.prototype.createRangeElement=function(){var e=this.$bar.data(),t=e.options,a=e.data;if(this.$range||(this.$range=$("<div>",{class:"slider__range"}),this.$range.data("have-handler",!1),this.$bar.append(this.$range)),t.isHorizontal)if(Array.isArray(a)){var i=a[0],s=a[1];this.$range.css({left:i+"%",width:s-i+"%","border-radius":"0.75rem"})}else this.$range.css({width:a+"%","border-top-left-radius":"0.75rem","border-bottom-left-radius":"0.75rem"});else if(Array.isArray(a)){i=a[0],s=a[1];this.$range.css({top:i+"%",height:s-i+"%","border-radius":"0.75rem"})}else this.$range.css({height:a+"%"});var n=this.$range.data("have-handler"),r=t.dragInterval&&Array.isArray(a);r&&!n&&(this.$range.css({cursor:"grab"}),this.$range.on("mousedown.bar",this.dragStartHandler.bind(this)),this.$range.data("have-handler",!0),this.$range[0].onclick=function(e){e.stopPropagation()},this.$range.on("dragstart.bar",!1)),!r&&n&&(this.$range.css({cursor:"default"}),this.$range.off("mousedown.bar"),this.$range.data("have-handler",!1),this.$range[0].onclick=null,this.$range.off("dragstart.bar"))},e.prototype.dragStartHandler=function(e){var t,a=this;this.$range.css({cursor:"grabbing"});var i=this.$view[0].getBoundingClientRect();t=this.$bar.data("options").isHorizontal?(e.clientX-i.x)/i.width*100:(e.clientY-i.y)/i.height*100;var s=$.Event("startChanging.myMVPSlider");this.$view.trigger(s,[!0]);var n=this.makeDragHandler(t);this.$view.parent(".js-slider__container").on("mousemove.bar",n),document.onmouseup=function(){a.$view.parent(".js-slider__container").off("mousemove.bar",n),a.$range.css({cursor:"grab"});var e=$.Event("dropRange.myMVPSlider");a.$view.parent(".js-slider__container").trigger(e),document.onmouseup=null}},e.prototype.makeDragHandler=function(e){var t=this;return function(a){var i=t.$view[0].getBoundingClientRect(),s=(t.$bar.data("options").isHorizontal?(a.clientX-i.x)/i.width*100:(a.clientY-i.y)/i.height*100)-e,n=$.Event("dragRange.myMVPSlider");t.$view.parent(".js-slider__container").trigger(n,[s])}},e.prototype.destroyRangeElement=function(){this.$range.remove()},e.createBar=function(){return $("<div>",{class:"js-slider__bar slider__bar"})},e}(),h=(a(3),function(){return(h=Object.assign||function(e){for(var t,a=1,i=arguments.length;a<i;a++)for(var s in t=arguments[a])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)}),c=function(){function e(t){this.$barContainer=t.$viewContainer,this.$view=this.$barContainer.parent(".js-slider__container"),this.$runner=e.createRunner(),this.isRendered=!1,this.isSecond=!0===t.isSecond}return e.prototype.update=function(e,t){var a=this.$runner.data("options"),i=h(h(h({},{isHorizontal:!0}),a),t);i.isHorizontal&&!this.$runner.hasClass("slider__runner_horizontal")&&this.$runner.addClass("slider__runner_horizontal"),!i.isHorizontal&&this.$runner.hasClass("slider__runner_horizontal")&&this.$runner.removeClass("slider__runner_horizontal"),this.isSecond?this.$runner.addClass("runner_second"):this.$runner.addClass("runner_first"),this.isRendered||(this.$barContainer.append(this.$runner),this.attacheEventHandlers(),this.isRendered=!0);var s,n,r=this.$runner[0].getBoundingClientRect().width;if(Array.isArray(e.percentage)&&Array.isArray(e.value)){var o=e.value,l=o[0],d=o[1],u=e.percentage,c=u[0],p=u[1],v=void 0,f=void 0;switch(c){case 0:v=c+"%";break;default:v="calc("+c+"% - "+r/2+"px)"}switch(p){case 100:f="calc(100% - "+r+"px)";break;default:f="calc("+p+"% - "+r/2+"px)"}s=this.isSecond?d:l,n=this.isSecond?f:v}if(!Array.isArray(e.percentage)&&!Array.isArray(e.value)){switch(e.percentage){case 0:n="0%";break;case 100:n="calc(100% - "+r+"px)";break;default:n="calc("+e.percentage+"% - "+r/2+"px)"}s=e.value}this.$runner.data("options",i),this.$runner.data("value",s),t.isHorizontal?this.$runner.css({left:n}):this.$runner.css({top:n})},e.prototype.destroy=function(){this.$runner.off("mousedown.runner"),this.$view.off("mousemove.runner"),this.$runner.remove(),this.isRendered=!1},e.prototype.attacheEventHandlers=function(){this.$runner.on("mousedown.runner",this.dragStartHandler.bind(this)),this.$runner.on("dragstart",!1)},e.prototype.dragStartHandler=function(e){var t=this,a=$.Event("startChanging.myMVPSlider");this.$view.trigger(a);var i=e.currentTarget,s=$(i).data("options");this.$runner.css("cursor","grabbing");var n=this.makeHandler(s);this.$view.on("mousemove.runner",n),document.onmouseup=function(){t.$view.off("mousemove.runner",n),t.$runner.css("cursor","grab");var e=$.Event("finish.myMVPSlider");t.$view.trigger(e),document.onmouseup=null}},e.prototype.makeHandler=function(e){var t,a,i=this,s=this.$view[0].getBoundingClientRect();return function(n){e.isHorizontal?(t=n.clientX-s.x,a=t/s.width*100):(t=n.clientY-s.y,a=t/s.height*100);var r=$.Event("changeValue.myMVPSlider");i.$view.trigger(r,[a,i.isSecond])}},e.createRunner=function(){return $("<div>",{class:"js-slider__runner slider__runner"})},e}(),p=(a(4),function(){return(p=Object.assign||function(e){for(var t,a=1,i=arguments.length;a<i;a++)for(var s in t=arguments[a])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)}),v=function(){function e(t){this.$view=t.$viewContainer,this.$displayContainer=e.createValuesDisplayContainer(),this.isRendered=!1}return e.prototype.update=function(e,t){var a=this.$displayContainer.data("options"),i=p(p(p({},{isHorizontal:!0,prefix:"",postfix:""}),a),t),s=e.value,n=e.percentage;Array.isArray(s)&&Array.isArray(n)&&(this.$firstValDisplay||(this.$firstValDisplay=$("<div>",{class:"slider__display_value"}),this.$displayContainer.append(this.$firstValDisplay)),this.$secondValDisplay||(this.$secondValDisplay=$("<div>",{class:"slider__display_value"}),this.$displayContainer.append(this.$secondValDisplay))),Array.isArray(s)||Array.isArray(n)||(this.$firstValDisplay||(this.$firstValDisplay=$("<div>",{class:"slider__display_value"}),this.$displayContainer.append(this.$firstValDisplay)),this.$secondValDisplay&&(this.$secondValDisplay.remove(),this.$secondValDisplay=void 0)),this.$displayContainer.data({options:i,data:e.value}),t.isHorizontal&&!this.$displayContainer.hasClass("slider__display_container_horizontal")&&this.$displayContainer.addClass("slider__display_container_horizontal"),!t.isHorizontal&&this.$displayContainer.hasClass("slider__display_container_horizontal")&&this.$displayContainer.removeClass("slider__display_container_horizontal"),this.isRendered||(this.$view.prepend(this.$displayContainer),this.isRendered=!0),this.updateValueDisplay({renderData:e,options:i})},e.prototype.destroy=function(){this.$displayContainer.remove(),this.$firstValDisplay&&(this.$firstValDisplay.remove(),this.$firstValDisplay=null),this.$secondValDisplay&&(this.$secondValDisplay.remove(),this.$secondValDisplay=null),this.isRendered=!1},e.prototype.updateValueDisplay=function(e){var t=e.renderData,a=e.options,i=t.data,s=t.percentage,n=t.percentageData;if(Array.isArray(s)){var r=s[0],o=s[1],l=i[n.indexOf(r)].toString();this.$firstValDisplay.data("data",l),this.$firstValDisplay.data("options",a);var d=i[n.indexOf(o)].toString();this.$secondValDisplay.data("data",d),this.$secondValDisplay.data("options",a);var u=a.prefix,h=a.prefix;u+=l,h+=d,""!==a.postfix&&(u+=a.postfix,h+=a.postfix),this.$firstValDisplay.html(u),this.$secondValDisplay.html(h);var c=this.$firstValDisplay[0].getBoundingClientRect(),p=this.$secondValDisplay[0].getBoundingClientRect(),v=void 0,f=void 0;switch(r){case 0:a.isHorizontal?this.$firstValDisplay.css({left:"0%"}):this.$firstValDisplay.css({top:"0%"});break;default:a.isHorizontal?(v="calc("+r+"% - "+c.width/2+"px)",this.$firstValDisplay.css({left:v})):(v="calc("+r+"% - "+c.height/2+"px)",this.$firstValDisplay.css({top:v}))}switch(o){case 100:a.isHorizontal?(f="calc("+o+"% - "+p.width+"px)",this.$secondValDisplay.css({left:f})):this.$secondValDisplay.css({down:"0%"});break;default:a.isHorizontal?(f="calc("+o+"% - "+p.width/2+"px)",this.$secondValDisplay.css({left:f})):(f="calc("+o+"% - "+p.height/2+"px)",this.$secondValDisplay.css({top:f}))}}else{l=i[n.indexOf(s)].toString();this.$firstValDisplay.data("data",l),this.$firstValDisplay.data("options",a);u=a.prefix;u+=l,""!==a.postfix&&(u+=a.postfix),this.$firstValDisplay.html(u),a.isHorizontal?this.$firstValDisplay.css({left:s+"%"}):this.$firstValDisplay.css({top:s+"%"})}},e.createValuesDisplayContainer=function(){return $("<div>",{class:"slider__display_container"})},e}(),f=function(){return(f=Object.assign||function(e){for(var t,a=1,i=arguments.length;a<i;a++)for(var s in t=arguments[a])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)},y=function(){function e(e,t){this.$container=$(e),this.viewOptions=t,this.observers=new Set,this.$view=this.createView(),this.$barContainer=$("<div>",{class:"slider__bar_container"}),this.$view.append(this.$barContainer),this.isRendered=!1}return e.prototype.render=function(e){this.renderData=e,this.viewOptions.isHorizontal&&!this.$view.hasClass("slider__container_horizontal")&&this.$view.addClass("slider__container_horizontal"),!this.viewOptions.isHorizontal&&this.$view.hasClass("slider__container_horizontal")&&this.$view.removeClass("slider__container_horizontal"),this.isRendered||(this.attachEventHandlers(),this.$container.append(this.$view),this.isRendered=!0),this.updateValuesDisplay(e),this.updateScale(e),this.updateBar(e.percentage),this.updateRunners(e)},e.prototype.update=function(e){var t=f(f({},this.viewOptions),this.validateData(e));this.viewOptions=t,this.$view.data("options",t),this.renderData&&this.render(this.renderData)},e.prototype.addObserver=function(e){this.observers.add(e)},e.prototype.removeObserver=function(e){this.observers.delete(e)},e.prototype.getData=function(){return this.viewOptions},e.prototype.destroy=function(){this.bar&&this.bar.destroy(),this.scale&&this.scale.destroy(),this.runner&&this.runner.destroy(),this.secondRunner&&this.secondRunner.destroy(),this.valueDisplay&&this.valueDisplay.destroy(),this.$view.remove(),this.isRendered=!1},e.prototype.createView=function(){var e=this.viewOptions,t=$("<div>",{class:"js-slider__container slider__container"});return t.data("options",e),t},e.prototype.updateBar=function(e){this.viewOptions.bar&&this.bar&&this.bar.update({data:e,options:this.viewOptions}),this.viewOptions.bar&&!this.bar&&(this.bar=new u({$viewContainer:this.$barContainer}),this.bar.update({data:e,options:this.viewOptions})),!this.viewOptions.bar&&this.bar&&this.bar.destroy()},e.prototype.updateScale=function(e){this.viewOptions.scale&&this.scale&&this.scale.update({data:e,options:this.viewOptions}),this.viewOptions.scale&&!this.scale&&(this.scale=new l({$viewContainer:this.$view}),this.scale.update({data:e,options:this.viewOptions})),!this.viewOptions.scale&&this.scale&&this.scale.destroy()},e.prototype.updateValuesDisplay=function(e){this.viewOptions.displayValue&&this.valueDisplay&&this.valueDisplay.update(e,this.viewOptions),this.viewOptions.displayValue&&!this.valueDisplay&&(this.valueDisplay=new v({$viewContainer:this.$view}),this.valueDisplay.update(e,this.viewOptions)),!this.viewOptions.displayValue&&this.valueDisplay&&this.valueDisplay.destroy()},e.prototype.updateRunners=function(e){this.viewOptions.runner?Array.isArray(e.value)?(this.runner||(this.runner=new c({$viewContainer:this.$barContainer,isSecond:!1})),this.runner.update(e,this.viewOptions),this.secondRunner||(this.secondRunner=new c({$viewContainer:this.$barContainer,isSecond:!0})),this.secondRunner.update(e,this.viewOptions)):(this.runner||(this.runner=new c({$viewContainer:this.$barContainer,isSecond:!1})),this.runner.update(e,this.viewOptions)):(this.runner&&this.runner.destroy(),this.secondRunner&&this.secondRunner.destroy()),!this.viewOptions.range&&this.secondRunner&&this.secondRunner.destroy()},e.prototype.notify=function(e){switch(e.event){case"start":this.observers.forEach((function(e){e.start()}));break;case"change":this.observers.forEach((function(t){t.change(e.value)}));break;case"finish":this.observers.forEach((function(e){e.finish()}))}},e.prototype.attachEventHandlers=function(){this.$view.bind("startChanging.myMVPSlider",this.startChangingHandler.bind(this)),this.$view.bind("changeValue.myMVPSlider",this.changeValueHandler.bind(this)),this.$view.bind("finish.myMVPSlider",this.finishEventHandler.bind(this))},e.prototype.startChangingHandler=function(e,t){this.notify({event:"start"});var a=this.renderData.percentage;if(t&&Array.isArray(a)){var i=this.makeDragHandler(a),s=this.makeDropHandler();this.$view.bind("dragRange.myMVPSlider",i),this.$view.bind("dropRange.myMVPSlider",s)}},e.prototype.makeDragHandler=function(e){var t=this;return function(a,i){var s=e[1]-e[0],n=e[0]+i,r=e[1]+i;n<0&&(r=(n=0)+s),r>100&&(n=(r=100)-s);var o={event:"change",value:[n,r]};t.notify(o)}},e.prototype.makeDropHandler=function(){var e=this;return function(){e.notify({event:"finish"}),e.$view.unbind("dragRange.myMVPSlider",!1),e.$view.unbind("dropRange.myMVPSlider",!1)}},e.prototype.changeValueHandler=function(e,t,a){var i,s=this.renderData.percentage;i=a&&Array.isArray(s)?{event:"change",value:[s[0],t]}:Array.isArray(s)?{event:"change",value:[t,s[1]]}:{event:"change",value:t},this.notify(i)},e.prototype.finishEventHandler=function(){this.notify({event:"finish"})},e.prototype.validateData=function(t){var a=this;return Object.entries(t).map((function(t){var i=t[0];switch(i){case"isHorizontal":case"range":case"dragInterval":case"runner":case"bar":case"scale":case"displayScaleValue":case"displayValue":case"displayMin":case"displayMax":if("boolean"==typeof t[1])return t;break;case"scaleStep":if(e.isValidStep(t[1]))return t;break;case"prefix":case"postfix":if("string"==typeof t[1])return t;break;default:return}return[i,a.viewOptions[i]]})).reduce((function(e,t){var a,i=t[0],s=t[1];return f(f({},e),((a={})[i]=s,a))}),{})},e.isValidStep=function(e){return"number"==typeof e&&(Number.isFinite(e)&&e>0)},e}(),V=function(){return(V=Object.assign||function(e){for(var t,a=1,i=arguments.length;a<i;a++)for(var s in t=arguments[a])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)},g=function(){function e(e,t){this.initOptions=e,this.node=t,this.createModel(),this.createView(),this.createPresenter()}return e.prototype.update=function(e){this.options=V(V(V({},this.initOptions),this.options),e),this.presenter.update(e)},e.prototype.getAllData=function(){return this.presenter.getAllData()},e.prototype.getModelData=function(){return this.presenter.getModelData()},e.prototype.getViewData=function(){return this.presenter.getViewData()},e.prototype.getPresenterData=function(){return this.presenter.getPresenterData()},e.prototype.reset=function(){this.options=this.initOptions,this.update(this.initOptions)},e.prototype.destroy=function(){this.view.destroy()},e.prototype.createModel=function(){var e=this.initOptions,t=e.maxValue,a=e.minValue,i=e.step,n=e.value,r=e.secondValue;this.model=new s({maxValue:t,minValue:a,step:i,value:n,secondValue:r})},e.prototype.createPresenter=function(){var e=this.initOptions,t=e.dataValues,a=e.onStart,i=e.onChange,s=e.onFinish,n=e.onUpdate;this.presenter=new r({model:this.model,view:this.view,dataValues:t,onStart:a,onChange:i,onFinish:s,onUpdate:n})},e.prototype.createView=function(){var e=this.initOptions,t=e.isHorizontal,a=e.range,i=e.dragInterval,s=e.runner,n=e.bar,r=e.scale,o=e.scaleStep,l=e.displayScaleValue,d=e.displayValue,u=e.displayMin,h=e.displayMax,c=e.prefix,p=e.postfix;this.view=new y(this.node,{isHorizontal:t,range:a,dragInterval:i,runner:s,bar:n,scale:r,scaleStep:o,displayScaleValue:l,displayValue:d,displayMin:u,displayMax:h,prefix:c,postfix:p})},e}();!function(e){e.fn.myMVPSlider=function(t){var a=e.extend({maxValue:100,minValue:0,step:1,value:0,secondValue:void 0,isHorizontal:!0,range:!1,dragInterval:!1,runner:!0,bar:!0,scale:!1,scaleStep:1,displayScaleValue:!1,displayValue:!1,displayMin:!1,displayMax:!1,prefix:"",postfix:"",dataValues:[],onStart:function(){},onChange:function(){},onFinish:function(){},onUpdate:function(){}},t);return this.each((function(){var t=e(this),i=new g(a,this);t.data("myMVPSlider",i)})),this}}(jQuery)}])}));